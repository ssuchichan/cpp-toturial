

# 内联

* 内联就是用函数已被编译好的二进制代码，替换对该函数的调用指令
* 内联在保证函数特性的同时，避免了函数调用开销
* 注意内联与有参宏（宏函数）的区别

* 内联会使可执行文件的体积和进程代码的内存变大，因此只有频繁调用的简单函数才适合内联
* 若函数在类声明中直接定义，则自动被优化为内联，否则可在其声明处加上inline关键字
* inline关键字仅表示期望该函数被优化为内联，但是否适合内联则完全由编译器决定
* 稀少被调用的复杂函数和递归函数都不适合内联


# 动态内存分配

* 继续使用标准C库函数`malloc/calloc/realloc/free`
* 使用new/delete操作符在堆中分配/释放内存
```c++
  int* pi = new int; 
  delete pi;
```
* 在分配内存时同时初始化
```c++
  int* pi = new int(100);
  delete pi;
```
* 以数组方式new的也是以数组方式delete
```c++
  int* pi = new int[4]{1,2}; 
  delete[] pi;
```
* 通过new操作符分配N维数组，返回N-1维数组指针
```c++
  int(*prow)[4] = new int[3][4];
  delete[] prow;
  
  int(*ppage)[4][5] = new int[3][4][5];
  delete[] ppage;
```
* 不能通过delete操作符释放已释放过的内存
* delete野指针后果未定义，delete空指针安全
* 内存分配失败，new操作符抛出`bad_alloc`异常
* 定位分配
  * new(指针)类型(初值)
  * 在一个已分配的内存空间中创建对象





